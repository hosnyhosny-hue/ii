<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ù„Ø¹Ø¨Ø© Ø§Ø®ØªØ¨Ø§Ø± â€“ Ø±Ø³Ù„ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰ (20 Ø³Ø¤Ø§Ù„)</title>

<style>
  body{
    margin:0;
    font-family: Tahoma, Arial, sans-serif;
    background: linear-gradient(#eef7ff,#ffffff);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:16px;
  }
  .container{
    width: min(900px, 95%);
    background:#fff;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,.10);
    padding:20px;
  }
  h1{ text-align:center; color:#2f80ed; margin:0 0 10px; }
  .sub{ text-align:center; color:#5b6b7a; font-weight:700; margin:0 0 14px; }
  label{ font-weight:900; display:block; margin:10px 0 8px; }
  input{
    width:100%;
    padding:14px;
    font-size:18px;
    border-radius:14px;
    border:2px solid #2f80ed;
    background:#f7fbff;
    font-weight:900;
    outline:none;
  }
  button{
    width:100%;
    padding:14px;
    margin-top:10px;
    font-size:18px;
    font-weight:900;
    border-radius:14px;
    border:none;
    cursor:pointer;
    position:relative;
    text-align:right;
  }
  .primary{ background:#2f80ed; color:#fff; }
  .choice{
    background:#f1f6ff;
    border:2px solid #2f80ed;
    color:#1b2a3a;
  }
  .choice:hover{ background:#dbe9ff; }

  .choice.correct{
    background:#d4f7dc !important;
    border-color:#27ae60 !important;
    box-shadow: 0 0 0 4px rgba(39,174,96,.12);
  }
  .choice.correct::after{
    content:"âœ”";
    position:absolute;
    left:14px;
    top:50%;
    transform:translateY(-50%);
    font-size:22px;
    color:#1f7a46;
  }

  .choice.wrong{
    background:#ffdede !important;
    border-color:#eb5757 !important;
    box-shadow: 0 0 0 4px rgba(235,87,87,.10);
  }
  .choice.wrong::after{
    content:"âœ–";
    position:absolute;
    left:14px;
    top:50%;
    transform:translateY(-50%);
    font-size:22px;
    color:#b13232;
  }

  .hidden{ display:none; }

  .lesson{
    display:inline-block;
    background:#e9f6ee;
    color:#219653;
    padding:8px 12px;
    border-radius:999px;
    font-weight:900;
  }
  .toprow{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
  }
  .progress{
    height:12px;
    background:#e0ecff;
    border-radius:10px;
    overflow:hidden;
    width: 260px;
  }
  .bar{ height:100%; width:0%; background:#2f80ed; transition:width .25s ease; }

  .footer{
    margin-top:14px;
    font-weight:900;
    display:flex;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
    color:#1b2a3a;
  }
  .resultBox{
    margin-top:14px;
    padding:14px;
    border-radius:16px;
    background:#f7fbff;
    border:1px solid rgba(47,128,237,.18);
    font-weight:900;
    line-height:1.8;
  }
  .big{ font-size:22px; color:#2f80ed; }
  .note{
    margin-top:10px;
    color:#5b6b7a;
    font-weight:800;
    font-size:13px;
    line-height:1.6;
  }
  .ok{ color:#219653; }
  .warn{ color:#b13232; }
</style>
</head>

<body>
<div class="container">

  <!-- Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
  <div id="startScreen">
    <h1>Ù„Ø¹Ø¨Ø© Ø§Ø®ØªØ¨Ø§Ø±: Ø±Ø³Ù„ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰</h1>
    <p class="sub">20 Ø³Ø¤Ø§Ù„Ù‹Ø§ â€¢ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø«Ù… Ø§Ø¨Ø¯Ø£</p>

    <label for="studentName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨/Ù€Ø©</label>
    <input id="studentName" placeholder="Ù…Ø«Ø§Ù„: Ø­Ø³Ù†ÙŠ" autocomplete="off" />

    <button class="primary" id="startBtn" type="button">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸš€</button>
  </div>

  <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
  <div id="quizScreen" class="hidden">
    <div class="toprow">
      <div class="lesson" id="lesson"></div>
      <div>
        <div id="counter" style="font-weight:900;color:#5b6b7a"></div>
        <div class="progress"><div class="bar" id="bar"></div></div>
      </div>
    </div>

    <h2 id="question" style="margin:10px 0 12px;line-height:1.5;"></h2>
    <div id="choices"></div>

    <div class="footer">
      <div>Ø§Ù„Ø§Ø³Ù…: <span id="nameView"></span></div>
      <div>Ø§Ù„Ø¯Ø±Ø¬Ø©: <span id="scoreView">0</span>/20</div>
    </div>
  </div>

  <!-- Ø§Ù„ØªØ³Ù„ÙŠÙ… ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© -->
  <div id="submitScreen" class="hidden">
    <h1>âœ… Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>
    <p class="sub">Ø§Ø¶ØºØ· Submit Ù„Ø¥Ø¸Ù‡Ø§Ø± Ù†ØªÙŠØ¬ØªÙƒ (ÙˆØ³ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Google Form Ø¨Ø¯ÙˆÙ† ÙØªØ­Ù‡)</p>

    <button class="primary" id="submitBtn" type="button">Submit (ØªØ³Ù„ÙŠÙ…)</button>

    <div id="resultBox" class="resultBox hidden">
      <div class="big" id="finalMsg">â€”</div>
      <div>Ø§Ù„Ø·Ø§Ù„Ø¨/Ù€Ø©: <span id="finalName">â€”</span></div>
      <div>Ø¹Ù„Ø§Ù…ØªÙƒ: <span id="finalScore">0</span> Ù…Ù† 20</div>
      <div class="note" id="saveStatus">â€”</div>
    </div>

    <button id="playAgainBtn" type="button">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ ğŸ”</button>
  </div>

</div>

<script>
/* ===== Ø¥Ø¹Ø¯Ø§Ø¯ Google Form (Ø¨Ø¯ÙˆÙ† ØªØ­ÙˆÙŠÙ„) =====
   Ù…Ù‡Ù…: Ù†Ø³ØªØ®Ø¯Ù… formResponse Ø¨Ø¯Ù„ viewform
*/
const FORM_RESPONSE_URL =
"https://docs.google.com/forms/d/e/1FAIpQLSexihBtPhJ4gWknpKMtnGZ_vaD7iNRRyWAgwJOAcNvtLTHZ0Q/formResponse";

const ENTRY_NAME  = "entry.286259";
const ENTRY_SCORE = "entry.626618781";

/* ===== Ù…Ø¤Ø«Ø±Ø§Øª ØµÙˆØªÙŠØ© ===== */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let audioCtx = null;

function ensureAudio(){
  if(!audioCtx) audioCtx = new AudioCtx();
  if(audioCtx.state === "suspended") audioCtx.resume();
}
function tone(freq, dur=0.18, type="sine", gain=0.05){
  ensureAudio();
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = type;
  o.frequency.setValueAtTime(freq, audioCtx.currentTime);
  g.gain.value = gain;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime + dur);
}
function playCorrect(){
  tone(700,.10,"triangle",0.05);
  setTimeout(()=>tone(950,.12,"triangle",0.05),90);
  setTimeout(()=>tone(1200,.14,"triangle",0.05),190);
}
function playWrong(){
  tone(260,.12,"sine",0.05);
  setTimeout(()=>tone(180,.14,"sine",0.05),120);
}

/* ===== Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (20) ===== */
const questions = [
  {lesson:"Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", q:"ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŸ", c:["4","5","6","7"], a:2},
  {lesson:"Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", q:"Ø£ÙŠÙ‘ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠÙØ¹Ø¯Ù‘ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŸ", c:["Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„","Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡","Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø·Ø¹Ø§Ù…","Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨"], a:0},
  {lesson:"Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ÙƒØ±ÙŠÙ…Ø©", q:"Ù…Ø§Ø°Ø§ ØªÙ‚ÙˆÙ„ Ø§Ù„Ø¢ÙŠØ© Ø¹Ù† Ø§Ù„Ø±Ø³Ù„ØŸ", c:["Ù†ÙØ±Ù‘Ù‚ Ø¨ÙŠÙ† Ø¨Ø¹Ø¶Ù‡Ù…","Ù„Ø§ Ù†ÙØ±Ù‘Ù‚ Ø¨ÙŠÙ† Ø£Ø­Ø¯ Ù…Ù† Ø±Ø³Ù„Ù‡","Ù†Ø¤Ù…Ù† Ø¨Ø¨Ø¹Ø¶Ù‡Ù… ÙÙ‚Ø·","Ù„Ø§ Ù†Ø¤Ù…Ù† Ø¨Ù‡Ù…"], a:1},

  {lesson:"Ù…Ù† Ù‡Ù… Ø§Ù„Ø±Ø³Ù„ØŸ", q:"Ø§Ù„Ø±Ø³Ù„ Ø±Ø¬Ø§Ù„ ÙŠØªØµÙÙˆÙ† Ø¨Ù€â€¦", c:["Ø§Ù„ÙƒØ³Ù„","Ø§Ù„ØµØ¯Ù‚ ÙˆØ§Ù„Ø£Ù…Ø§Ù†Ø© ÙÙŠ ØªØ¨Ù„ÙŠØº Ø§Ù„Ø±Ø³Ø§Ù„Ø©","Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù†Ø§Ø³","Ø­Ø¨ Ø§Ù„Ù„Ø¹Ø¨ ÙÙ‚Ø·"], a:1},
  {lesson:"Ù…Ù† Ù‡Ù… Ø§Ù„Ø±Ø³Ù„ØŸ", q:"Ø§Ù„Ø±Ø³Ù„ Ù‡Ù…â€¦", c:["Ø£Ù‚Ù„ Ø§Ù„Ù†Ø§Ø³ Ø£Ø®Ù„Ø§Ù‚Ù‹Ø§","Ø£ÙØ¶Ù„ Ø§Ù„Ø¨Ø´Ø± ÙˆØ£ÙƒÙ…Ù„ Ø§Ù„Ù†Ø§Ø³ Ø£Ø®Ù„Ø§Ù‚Ù‹Ø§","Ø£ØºÙ†Ù‰ Ø§Ù„Ù†Ø§Ø³","Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ù†Ø§Ø³ Ø¬Ø³Ù…Ù‹Ø§"], a:1},
  {lesson:"Ù…Ù† Ù‡Ù… Ø§Ù„Ø±Ø³Ù„ØŸ", q:"Ù„Ù…Ø§Ø°Ø§ Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰ Ø§Ù„Ø±Ø³Ù„ØŸ", c:["Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„","Ù„Ø­Ù…Ù„ Ø±Ø³Ø§Ù„Ø§ØªÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø§Ø³","Ù„Ù„Ø³ÙØ± ÙÙ‚Ø·","Ù„Ù„ØªÙ†Ø§ÙØ³"], a:1},

  {lesson:"Ø­ÙƒÙ… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„", q:"Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„ Ù‡Ùˆâ€¦", c:["Ø£Ù…Ø± Ø§Ø®ØªÙŠØ§Ø±ÙŠ","Ù…Ù…Ù†ÙˆØ¹","Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†","Ù„Ø§ Ø¹Ù„Ø§Ù‚Ø© Ù„Ù‡ Ø¨Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†"], a:2},
  {lesson:"Ø­ÙƒÙ… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„", q:"Ù„Ù…Ø§Ø°Ø§ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ù„Ù… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø±Ø³Ù„ Ø¬Ù…ÙŠØ¹Ù‹Ø§ØŸ", c:["Ù„Ø£Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ù‡Ù… Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†","Ù„Ø£Ù†Ù‡Ù… ÙŠØ¹ÙŠØ´ÙˆÙ† Ø¨ÙŠÙ†Ù†Ø§ Ø¯Ø§Ø¦Ù…Ù‹Ø§","Ù„Ø£Ù†Ù‡Ù… Ø£ØºÙ†ÙŠØ§Ø¡","Ù„Ø£Ù†Ù‡Ù… Ø£Ù‚Ø§Ø±Ø¨Ù†Ø§"], a:0},

  {lesson:"Ù…Ù‡Ø§Ù… Ø§Ù„Ø±Ø³Ù„", q:"Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ø±Ø³Ù„ Ù‡ÙŠâ€¦", c:["ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø±ÙŠØ§Ø¶Ø©","Ø§Ù„Ø¯Ø¹ÙˆØ© Ø¥Ù„Ù‰ ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰","Ø¨ÙŠØ¹ ÙˆØ´Ø±Ø§Ø¡","Ø§Ù„Ø³ÙØ± Ù„Ù„ØªØ³Ù„ÙŠØ©"], a:1},
  {lesson:"Ù…Ù‡Ø§Ù… Ø§Ù„Ø±Ø³Ù„", q:"Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø±Ø³Ù„ Ù‡ÙŠâ€¦", c:["ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù†Ø§Ø³ Ø£Ù…ÙˆØ± Ø¯ÙŠÙ†Ù‡Ù…","Ø¬Ù…Ø¹ Ø§Ù„Ø£Ù…ÙˆØ§Ù„","Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‚Ù„Ø§Ø¹","ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø±Ø³Ù… ÙÙ‚Ø·"], a:0},
  {lesson:"Ù…Ù‡Ø§Ù… Ø§Ù„Ø±Ø³Ù„", q:"Ø¥Ø°Ø§ Ø§Ù„ØªØ²Ù…Ù†Ø§ Ø¨Ù…Ù†Ù‡Ø¬ Ø§Ù„Ù„Ù‡ Ù†Ø¹ÙŠØ´ ÙÙŠâ€¦", c:["Ø³Ø¹Ø§Ø¯Ø© ÙˆÙ…Ø­Ø¨Ø© ÙˆØ³Ù„Ø§Ù…","Ø®ÙˆÙ ÙˆÙ‚Ù„Ù‚ Ø¯Ø§Ø¦Ù…","ÙƒØ³Ù„ ÙˆØªØ¹Ø¨","Ø®ØµØ§Ù… Ø¯Ø§Ø¦Ù…"], a:0},

  {lesson:"Ø§Ù„Ù…Ø¹Ø¬Ø²Ø©", q:"Ø§Ù„Ù…Ø¹Ø¬Ø²Ø© Ù‡ÙŠâ€¦", c:["Ø´ÙŠØ¡ ÙŠÙÙˆÙ‚ Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¨Ø´Ø±","Ù„Ø¹Ø¨Ø© Ø¹Ø§Ø¯ÙŠØ©","Ø­ÙƒØ§ÙŠØ© Ø¨Ù„Ø§ Ù…Ø¹Ù†Ù‰","Ø´ÙŠØ¡ ÙŠØ³ØªØ·ÙŠØ¹ Ø£ÙŠ Ø´Ø®Øµ ÙØ¹Ù„Ù‡"], a:0},
  {lesson:"Ø§Ù„Ù…Ø¹Ø¬Ø²Ø©", q:"Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø£Ø­Ø¯ Ø£Ù† ÙŠÙØ¹Ù„ Ø§Ù„Ù…Ø¹Ø¬Ø²Ø© Ø¥Ù„Ø§â€¦", c:["Ø¨Ù‚ÙˆØ© Ø¹Ø¶Ù„Ø§ØªÙ‡","Ø¨Ø£Ù…Ø± Ù…Ù† Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰","Ø¨Ø§Ù„Ù…Ø§Ù„","Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ ÙÙ‚Ø·"], a:1},
  {lesson:"Ø§Ù„Ù…Ø¹Ø¬Ø²Ø©", q:"Ø¬Ø¹Ù„ Ø§Ù„Ù„Ù‡ Ù„ÙƒÙ„ Ø±Ø³ÙˆÙ„ Ù…Ø¹Ø¬Ø²Ø© Ù„Ù€â€¦", c:["Ù„ÙŠØµØ¯Ù‚Ù‡ Ù‚ÙˆÙ…Ù‡ ÙˆÙŠØ¤Ù…Ù†ÙˆØ§ Ø¨Ø±Ø³Ø§Ù„ØªÙ‡","Ù„ÙŠØªÙØ§Ø®Ø± Ø¨Ù‡Ø§","Ù„ÙŠØ¬Ù…Ø¹ Ø¨Ù‡Ø§ Ø§Ù„Ù…Ø§Ù„","Ù„ÙŠØ®ÙŠÙ Ø§Ù„Ø£Ø·ÙØ§Ù„"], a:0},

  {lesson:"Ø¨Ø¹Ø¶ Ù…Ø¹Ø¬Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù„", q:"Ù…Ø§ Ù…Ø¹Ø¬Ø²Ø© Ù†Ø¨ÙŠ Ø§Ù„Ù„Ù‡ ØµØ§Ù„Ø­ØŸ", c:["Ø§Ù„Ù†Ø§Ù‚Ø© Ø§Ù„ØªÙŠ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„ØµØ®Ø±Ø©","Ø´Ù‚ Ø§Ù„Ø¨Ø­Ø±","Ø¥Ø¨Ø±Ø§Ø¡ Ø§Ù„Ø£ÙƒÙ…Ù‡ ÙˆØ§Ù„Ø£Ø¨Ø±Øµ","Ù†Ø²ÙˆÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù†"], a:0},
  {lesson:"Ø¨Ø¹Ø¶ Ù…Ø¹Ø¬Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù„", q:"Ù…Ù† Ù…Ø¹Ø¬Ø²Ø© Ù†Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù…ÙˆØ³Ù‰â€¦", c:["ØªØ­ÙˆÙ„ Ø§Ù„Ø¹ØµØ§ Ø¥Ù„Ù‰ Ø­ÙŠØ© ØªØ³Ø¹Ù‰","Ø§Ù„Ù†Ø§Ù‚Ø© Ù…Ù† Ø§Ù„ØµØ®Ø±Ø©","Ø¥Ø­ÙŠØ§Ø¡ Ø§Ù„Ù…ÙˆØªÙ‰","Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…"], a:0},
  {lesson:"Ø¨Ø¹Ø¶ Ù…Ø¹Ø¬Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù„", q:"Ø°ÙƒØ± Ø§Ù„Ø¯Ø±Ø³ Ø£Ù† Ù…Ù† Ù…Ø¹Ø¬Ø²Ø§Øª Ù…ÙˆØ³Ù‰ Ø£ÙŠØ¶Ù‹Ø§â€¦", c:["Ø´Ù‚ Ø§Ù„Ø¨Ø­Ø±","Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ù†Ø§Ù‚Ø©","Ù†Ø²ÙˆÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù†","Ø¥Ø¨Ø±Ø§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ù‰"], a:0},

  {lesson:"Ø¨Ø¹Ø¶ Ù…Ø¹Ø¬Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù„", q:"Ù…Ù† Ù…Ø¹Ø¬Ø²Ø§Øª Ø¹ÙŠØ³Ù‰ Ø§Ø¨Ù† Ù…Ø±ÙŠÙ…â€¦", c:["ÙŠØ¨Ø±Ø¦ Ø§Ù„Ø£Ø¨Ø±Øµ ÙˆØ§Ù„Ø£Ø¹Ù…Ù‰ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡","ØªØ­ÙˆÙ„ Ø§Ù„Ø¹ØµØ§ Ø¥Ù„Ù‰ Ø­ÙŠØ©","Ø§Ù„Ù†Ø§Ù‚Ø© Ù…Ù† Ø§Ù„ØµØ®Ø±Ø©","Ø´Ù‚ Ø§Ù„Ø¨Ø­Ø±"], a:0},

  {lesson:"Ù…Ø¹Ø¬Ø²Ø© Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯ ï·º", q:"Ø§Ù„Ù…Ø¹Ø¬Ø²Ø© Ø§Ù„Ø¨Ø§Ù‚ÙŠØ© Ø¥Ù„Ù‰ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø© Ù‡ÙŠâ€¦", c:["Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…","Ø§Ù„Ù†Ø§Ù‚Ø©","ØªØ­ÙˆÙ„ Ø§Ù„Ø¹ØµØ§","Ø¥Ø¨Ø±Ø§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ù‰"], a:0},
  {lesson:"ÙˆØ§Ø¬Ø¨ Ø§Ù„Ù…Ø³Ù„Ù… ØªØ¬Ø§Ù‡ Ø§Ù„Ø±Ø³Ù„", q:"Ù…Ù† ÙˆØ§Ø¬Ø¨ Ø§Ù„Ù…Ø³Ù„Ù… ØªØ¬Ø§Ù‡ Ø§Ù„Ø±Ø³Ù„â€¦", c:["Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ù„ ÙˆØ±Ø³Ø§Ù„Ø§ØªÙ‡Ù… ÙˆÙ„Ø§ ÙŠÙØ±Ù‘Ù‚ Ø¨ÙŠÙ†Ù‡Ù…","Ø¹Ø¯Ù… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ù‡Ù…","Ø§Ù„Ø³Ø®Ø±ÙŠØ© Ù…Ù†Ù‡Ù…","Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø±Ø³ÙˆÙ„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·"], a:0}
];

const TOTAL = questions.length;

/* ===== Ø¹Ù†Ø§ØµØ± ===== */
const startScreen  = document.getElementById("startScreen");
const quizScreen   = document.getElementById("quizScreen");
const submitScreen = document.getElementById("submitScreen");

const studentNameInput = document.getElementById("studentName");
const startBtn = document.getElementById("startBtn");

const lessonEl = document.getElementById("lesson");
const counterEl = document.getElementById("counter");
const barEl = document.getElementById("bar");
const questionEl = document.getElementById("question");
const choicesEl = document.getElementById("choices");

const nameView = document.getElementById("nameView");
const scoreView = document.getElementById("scoreView");

const submitBtn = document.getElementById("submitBtn");
const resultBox = document.getElementById("resultBox");
const finalMsg  = document.getElementById("finalMsg");
const finalName = document.getElementById("finalName");
const finalScore= document.getElementById("finalScore");
const saveStatus= document.getElementById("saveStatus");
const playAgainBtn = document.getElementById("playAgainBtn");

/* ===== Ø­Ø§Ù„Ø© ===== */
let index = 0;
let score = 0;
let studentName = "";

/* ===== Ø£Ø¯ÙˆØ§Øª ===== */
function show(el){ el.classList.remove("hidden"); }
function hide(el){ el.classList.add("hidden"); }

function startGame(){
  const name = (studentNameInput.value || "").trim();
  if (!name){
    alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ù‹Ø§ ğŸ™‚");
    studentNameInput.focus();
    return;
  }
  studentName = name;
  nameView.textContent = studentName;

  index = 0;
  score = 0;
  scoreView.textContent = score;

  hide(startScreen);
  show(quizScreen);
  renderQuestion();
}

function renderQuestion(){
  const q = questions[index];
  lessonEl.textContent = q.lesson;
  counterEl.textContent = `Ø³Ø¤Ø§Ù„ ${index+1} Ù…Ù† ${TOTAL}`;
  barEl.style.width = `${(index/TOTAL)*100}%`;

  questionEl.textContent = q.q;
  choicesEl.innerHTML = "";

  q.c.forEach((txt, i) => {
    const b = document.createElement("button");
    b.type = "button";
    b.className = "choice";
    b.textContent = txt;

    b.onclick = () => {
      if (i === q.a){
        b.classList.add("correct");
        score++;
        scoreView.textContent = score;
        playCorrect();
      } else {
        b.classList.add("wrong");
        playWrong();
      }

      [...choicesEl.querySelectorAll("button")].forEach(btn => btn.disabled = true);

      setTimeout(() => {
        index++;
        if (index >= TOTAL){
          hide(quizScreen);
          show(submitScreen);
        } else {
          renderQuestion();
        }
      }, 450);
    };

    choicesEl.appendChild(b);
  });
}

async function submitToGoogleFormSilently(){
  // Ø¥Ø±Ø³Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© (Ø¨Ø¯ÙˆÙ† ÙØªØ­ Ø£ÙŠ ØµÙØ­Ø©)
  const formData = new FormData();
  formData.append(ENTRY_NAME, studentName);
  formData.append(ENTRY_SCORE, String(score));

  // mode:no-cors ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
  await fetch(FORM_RESPONSE_URL, {
    method: "POST",
    mode: "no-cors",
    body: formData
  });
}

async function onSubmit(){
  // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©
  finalName.textContent = studentName;
  finalScore.textContent = String(score);

  if (score > 10){
    finalMsg.textContent = "Ø£Ø­Ø³Ù†Øª ğŸ‘";
  } else {
    finalMsg.textContent = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ØªØ­Ø³ÙŠÙ† Ø¹Ù„Ø§Ù…ØªÙƒ ğŸ’ª";
  }

  resultBox.classList.remove("hidden");
  saveStatus.innerHTML = "â³ Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©â€¦";

  try{
    await submitToGoogleFormSilently();
    saveStatus.innerHTML = "<span class='ok'>âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Google Form Ø¨Ø¯ÙˆÙ† ÙØªØ­Ù‡.</span>";
  }catch(e){
    // ÙÙŠ Ø­Ø§Ù„ Ù…Ù†Ø¹ CORS/ÙØªØ­ Ù…Ø­Ù„ÙŠ
    saveStatus.innerHTML =
      "<span class='warn'>âš ï¸ Ù„Ù… Ø£Ø³ØªØ·Ø¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­ÙØ¸ (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø¨Ø³Ø¨Ø¨ ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ù…Ø­Ù„ÙŠÙ‹Ø§). Ø§ÙØªØ­Ù‡ Ø¹Ø¨Ø± Live Server Ø£Ùˆ Ø§Ø³ØªØ¶Ø§ÙØ©.</span>";
  }
}

/* ===== Ø£Ø­Ø¯Ø§Ø« ===== */
startBtn.addEventListener("click", startGame);
studentNameInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") startGame();
});
submitBtn.addEventListener("click", onSubmit);
playAgainBtn.addEventListener("click", () => location.reload());
</script>

</body>
</html>
